{% extends "base.html" %}

{% block title %} Записи автора {{ author.get_full_name }} {% endblock %}

{% block header %} {{ author.get_full_name }} {% endblock %}

{% block content %}

    <h3>
        <a href="{% url 'profile' username=author.username %}"><strong class="d-block text-gray-dark"> {{ author.username }} </strong></a>
        {% if paginator.count  %}
            <small class="text-muted"> Количество записей: {{ paginator.count }} </small>
        {% else %}
            <small class="text-muted"> Записи отсутствуют </small>
        {% endif %}
    </h3>
    {% for post in page %}
        <div class="card mb-3 mt-1 shadow-sm">
            {% load thumbnail %}
                {% thumbnail post.image "960x339" crop="center" upscale=True as im %}
                <img class="card-img" src="{{ im.url }}">
            {% endthumbnail %}
        </div>
        <p>{{ post.text|linebreaksbr }}</p>
        <h3>
            {% if user.is_authenticated and user == author %}
                <div class="d-flex justify-content-between align-items-center">
                    <div class="btn-group ">
                            <a class="btn btn-sm text-muted" href="{% url 'post_edit' username=author.get_username post_id=post.id %}" role="button">Редактировать</a>
                    </div>
                </div>
            {% endif %}
            <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group ">
                    <a class="btn btn-sm text-muted" href="{% url 'post' username=author.get_username post_id=post.id %}" role="button">Добавить комментарий</a>
                </div>
            </div>
        </h3>
           <small class="text-muted"> Дата публикации:  {{ post.pub_date|date:"d M Y" }} </small>
        {% if post.group %}
            <small class="text-muted">
                , Группа: <a href="{% url 'group_posts' slug=post.group.slug %}"> {{  post.group.title  }} </a>
            </small>
        {% endif %}
        {% if not forloop.last %}<hr>{% endif %}

    {% endfor %}

    {% include "paginator.html" %}

{% endblock %}
